<html>
    <head>
        <title>Firebase Realtime Database Web</title>
<script src="https://www.gstatic.com/firebasejs/5.5.6/firebase.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyDvukwTRa5kbRxZENjd5J46_PwALpcryUo",
    authDomain: "test-50a0b.firebaseapp.com",
    databaseURL: "https://test-50a0b.firebaseio.com",
    projectId: "test-50a0b",
    storageBucket: "test-50a0b.appspot.com",
    messagingSenderId: "1002346447366"
  };
  firebase.initializeApp(config);
</script>
</head>
<body>
    <table>
        <tr>
            <td>ID: </td>
            <td><input type="text" name="user_name" id="user_id"/></td>
        </tr>
        <tr>
            <td>Username:</td>
            <td><input type="text" name="username" id="user_name"/></td>

        </tr>
        <tr>
            <td colspan="2">
                <input type="button" value="Save" onclick="save_user();"/>
                <input type="button" value="Update" onclick="update_user();"/>
                <input type="button" value="Delete" onclick="delete_user();"/>
            </td>
        </tr>
    </table>

    <h3>User list</h3>

    <table id="tbl_user_list" border="1">
        <tr>
            <td>#ID</td>
            <td>Name</td>
        </tr>

    </table>

    <script>
        var tblUsers = document.getElementById('tbl_user_list');
        var databaseRef = firebase.database().ref('users/');
        var rowIndex =1;
        databaseRef.once('value', function(snapshot) {
    snapshot.forEach(function(childSnapshot) {
   var childKey = childSnapshot.key;
   var childData = childSnapshot.val();
   
   var row = tblUsers.insertRow(rowIndex);
   var cellId = row.insertCell(0);
   var cellName = row.insertCell(1);
   cellId.appendChild(document.createTextNode(childKey));
   cellName.appendChild(document.createTextNode(childData.user_name));
   
   rowIndex = rowIndex + 1;
    });
  });

        function reload_page()
        {
            window.location.reload();
        }
        
        function save_user()
        {
            var user_name = document.getElementById('user_name').value;
            var uid = document.getElementById('user_id').value;
            //var uid = firebase.database().ref().child('user').push().key;

            var data ={
                user_id: uid,
                user_name: user_name
            }
            var updates ={};
            updates['/users/' + uid] = data;
            firebase.database().ref().update(updates);

            alert('User is created');
            reload_page();
        }

        

        function update_user()
        {
            var user_name = document.getElementById('user_name').value;
            var uid = document.getElementById('user_id').value;
            var data ={
                user_id: uid,
                user_name: user_name
            }

            var updates={};
            updates['/users/'+uid]=data;
            firebase.database().ref().update(updates);
            alert('user is updated');
            reload_page();
        }

        function delete_user()
        {
            var uid = document.getElementById('user_id').value;

            firebase.database().ref().child('/users/'+uid).remove();
            alert('user is deleted');
            reload_page();
        }

    </script>
</body>
</html>